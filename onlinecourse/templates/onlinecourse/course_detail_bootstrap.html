{% load static %} {% load custom_tag %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
            crossorigin="anonymous"
        />
        <link rel="stylesheet" href="{% static 'onlinecourse/course.css' %}" />
        <link rel="shortcut icon" href="{% static 'media/course_images/favicon.ico' %}" type="image/x-icon" />
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{{course.name}}</title>
    </head>

    <body>
        <!-- Navbar -->
        <header>{% include 'onlinecourse/navbar.html' %}</header>
        <!-- Page content -->
        <nav style="--bs-breadcrumb-divider: '>'" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="{% url 'onlinecourse:index' %}">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">{{ course.name }}</li>
            </ol>
        </nav>
        <div class="container-md">
            {% for lesson in course.lessons.all %}
            <div class="card" id="lesson">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5>Quiz {{ forloop.counter }}: {{lesson.title}}</h5>
                    {% if lesson_attempts|get_item:lesson.id == 0 %}
                    <h6 class="badge text-bg-danger">No attempt left</h6>
                    {% else %}
                    <h6 class="badge text-bg-success">Attempt left: {{ lesson_attempts|get_item:lesson.id }}</h6>
                    {% endif %}
                </div>
                <div class="card-body">{{lesson.content}}</div>
                <hr />
                <div class="quiz-action d-flex justify-content-between">
                    <form action="{% url 'onlinecourse:quiz_page' course.slug_name  %}">
                        <input type="hidden" name="name" value="{{lesson.title}}" />
                        {% if lesson_attempts|get_item:lesson.id == 0 %}
                        <input type="submit" class="btn btn-primary" value="Take quiz" disabled />
                        {% else %}
                        <input type="submit" class="btn btn-primary" value="Take quiz"/>
                        {% endif %}
                    </form>
                    <form action="#">
                        <button type="button" class="btn btn-primary score">View score</button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
            crossorigin="anonymous"
        ></script>
        <script src="{% static 'javascript/sessionCheck.js' %}"></script>
    </body>
</html>
